{"ast":null,"code":"import _slicedToArray from\"/Users/jiaye/Documents/GitHub/svinfo6250-student-jiayeli01/final/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./App.css';import{useState}from'react';import MenuPage from'./MenuPage';import LoginForm from'./LoginForm';import Logout from'./Logout';import CartButton from'./CartButton';import Cart from'./Cart';import{fetchLogin,fetchLogout}from'./services';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoggedIn=_useState2[0],setIsLoggedIn=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),cart=_useState6[0],setCart=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),menu=_useState8[0],setMenu=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),menuItems=_useState10[0],setMenuItems=_useState10[1];function onLogin(username){fetchLogin(username).then(function(data){setIsLoggedIn(true);setUsername(data.username);setCart(data.cart);getMenu();}).catch(function(error){console.log(error);});}function getMenu(){fetch('/api/menu').then(function(response){return response.json();}).then(function(data){return setMenuItems(data);}).catch(function(error){return console.error(error);});}function getCart(){setMenu(false);fetch('/api/cart',{method:'GET',headers:{'Content-Type':'application/json'}}).then(function(response){if(!response.ok){throw new Error(response.status);}return response.json();}).then(function(data){setCart(data);}).catch(function(error){console.error(error);});}function onLogout(){setIsLoggedIn(false);setUsername('');setCart({});setMenu(true);fetchLogout().catch(function(error){console.log(error);});}return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:isLoggedIn?/*#__PURE__*/_jsx(\"main\",{children:menu?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CartButton,{viewCart:getCart}),/*#__PURE__*/_jsx(MenuPage,{menuItems:menuItems}),/*#__PURE__*/_jsx(Logout,{onLogout:onLogout})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Cart,{cartItems:cart}),/*#__PURE__*/_jsx(Logout,{onLogout:onLogout})]})}):/*#__PURE__*/_jsx(LoginForm,{onLogin:onLogin})});}export default App;","map":{"version":3,"names":["useState","MenuPage","LoginForm","Logout","CartButton","Cart","fetchLogin","fetchLogout","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","isLoggedIn","setIsLoggedIn","_useState3","_useState4","username","setUsername","_useState5","_useState6","cart","setCart","_useState7","_useState8","menu","setMenu","_useState9","_useState10","menuItems","setMenuItems","onLogin","then","data","getMenu","catch","error","console","log","fetch","response","json","getCart","method","headers","ok","Error","status","onLogout","className","children","viewCart","cartItems"],"sources":["/Users/jiaye/Documents/GitHub/svinfo6250-student-jiayeli01/final/my-app/src/App.jsx"],"sourcesContent":["import './App.css';\nimport { useState } from 'react';\n\nimport MenuPage from './MenuPage';\nimport LoginForm from './LoginForm';\nimport Logout from './Logout';\nimport CartButton from './CartButton';\nimport Cart from './Cart';\n\nimport { fetchLogin, fetchLogout } from './services';\n\nfunction App() {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [username, setUsername] = useState('');\n  const [cart, setCart] = useState({});\n  const [menu, setMenu] = useState(true);\n  const [menuItems, setMenuItems] = useState([]);\n\n  function onLogin( username ) {\n    fetchLogin(username)\n    .then((data) => {\n      setIsLoggedIn(true);\n      setUsername(data.username);\n      setCart(data.cart);\n      getMenu();\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n  }\n\n  function getMenu() {\n    fetch('/api/menu')\n      .then(response => response.json())\n      .then(data => setMenuItems(data) )\n      .catch(error => console.error(error));\n  }\n  \n  function getCart(){\n    setMenu(false);\n    fetch('/api/cart', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n      .then((response) => {\n        if (!response.ok) {\n          throw new Error(response.status);\n        }\n        return response.json();\n      })\n      .then((data) => {\n        setCart(data);\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n  }\n\n\n  function onLogout() {\n    setIsLoggedIn(false);\n    setUsername('');\n    setCart({});\n    setMenu(true);\n    fetchLogout().catch((error) => {console.log(error);});\n  }\n\n  return (\n    <div className=\"app\">\n      {isLoggedIn ? (\n          <main>\n              {menu ? (\n              <div>\n                <CartButton viewCart={getCart} />\n                <MenuPage menuItems = {menuItems}/>\n                <Logout onLogout={onLogout} />\n              </div>\n            ) : (\n              <div>\n                <Cart cartItems={cart}/>\n                <Logout onLogout={onLogout} />\n              </div>\n            )}\n          </main>\n        ) : (\n          <LoginForm onLogin={onLogin} />\n        )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}